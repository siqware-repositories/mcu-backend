(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{y84H:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),s=n.n(a),r=n("ksP6"),i=n.n(r),o=(n("Hj/Q"),{name:"AddBanner",components:{vueDropzone:i.a},data:function(){return{data:{banner:"images/placeholder/placeholder.png",title:""},bannerOptions:{url:route("file.upload.original"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"Insert Banner"}}},methods:{show:function(){this.$modal.show("add")},successUploadBanner:function(e,t){this.data.banner=t.path},storeBanner:function(){var e=this,t=this;this.$validator.validateAll().then((function(n){n?(t.$vs.loading(),e.$store.dispatch("storeBanner",t.data).then((function(e){e?(t.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),t.resetField(),t.$refs.banner.removeAllFiles(!0)):t.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),t.$vs.loading.close()}))):t.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.data={logo:"images/placeholder/placeholder.png",project_name:"",project_from:"",project_status:"ongoing",description:""}}}}),c=n("KHd+"),l=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.07,clickToClose:!1,name:"add"}},[n("div",{staticClass:"flex justify-end"},[n("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("add")}}},[e._v("close")])]),e._v(" "),n("vx-card",{attrs:{"no-shadow":""}},[n("div",{staticClass:"vx-row"},[n("div",{staticClass:"vx-col w-full"},[n("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"Title",name:"title"},model:{value:e.data.title,callback:function(t){e.$set(e.data,"title",t)},expression:"data.title"}}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("title"),expression:"errors.has('title')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("title")))])],1),e._v(" "),n("div",{staticClass:"vx-col w-full mt-2"},[n("label",[e._v("Banner")]),e._v(" "),n("vue-dropzone",{ref:"banner",attrs:{duplicateCheck:!0,id:"thumbnail",options:e.bannerOptions},on:{"vdropzone-success":e.successUploadBanner}})],1)]),e._v(" "),n("vs-divider"),e._v(" "),n("div",{staticClass:"flex justify-end btn-group"},[n("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:e.storeBanner}},[e._v("រក្សាទុក")])],1)],1)],1)}),[],!1,null,"31778d2a",null).exports;function d(e,t,n,a,s,r,i){try{var o=e[r](i),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,s)}var u,v,p={name:"EditBanner",components:{vueDropzone:i.a},data:function(){return{data:{banner:"images/placeholder/placeholder.png",title:""},bannerOptions:{url:route("file.upload.original"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"Insert Banner"}}},methods:{fetchBanner:(u=s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchBanner");case 2:case"end":return e.stop()}}),e,this)})),v=function(){var e=this,t=arguments;return new Promise((function(n,a){var s=u.apply(e,t);function r(e){d(s,n,a,r,i,"next",e)}function i(e){d(s,n,a,r,i,"throw",e)}r(void 0)}))},function(){return v.apply(this,arguments)}),show:function(e){this.$modal.show("edit"),this.data=e},loadBanner:function(){this.$refs.banner.manuallyAddFile({size:123},this.data.banner)},successUploadBanner:function(e,t){this.data.banner=t.path},updateBanner:function(){var e=this,t=this;this.$validator.validateAll().then((function(n){n?(t.$vs.loading(),e.$store.dispatch("updateBanner",t.data).then((function(e){e?(t.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានកែប្រែ",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),t.fetchBanner(),t.$emit("finished")):t.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានកែប្រែ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),t.$vs.loading.close()}))):t.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.data={logo:"images/placeholder/placeholder.png",project_name:null,project_from:null,project_status:"ongoing",description:"description"}}}};function h(e,t,n,a,s,r,i){try{var o=e[r](i),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,s)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var r=e.apply(t,n);function i(e){h(r,a,s,i,o,"next",e)}function o(e){h(r,a,s,i,o,"throw",e)}i(void 0)}))}}var m,_={name:"Banner",components:{EditBanner:Object(c.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{attrs:{height:"auto",scrollable:!0,pivotY:.07,clickToClose:!1,name:"edit"}},[n("div",{staticClass:"flex justify-end"},[n("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(t){return e.$modal.hide("edit")}}},[e._v("close")])]),e._v(" "),n("vx-card",{attrs:{"no-shadow":""}},[n("div",{staticClass:"vx-row"},[n("div",{staticClass:"vx-col w-full"},[n("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"Title",name:"title"},model:{value:e.data.title,callback:function(t){e.$set(e.data,"title",t)},expression:"data.title"}}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("title"),expression:"errors.has('title')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("title")))])],1),e._v(" "),n("div",{staticClass:"vx-col w-full mt-2"},[n("label",[e._v("Banner")]),e._v(" "),n("vue-dropzone",{ref:"banner",attrs:{duplicateCheck:!0,id:"thumbnail",options:e.bannerOptions},on:{"vdropzone-mounted":e.loadBanner,"vdropzone-success":e.successUploadBanner}})],1)]),e._v(" "),n("vs-divider"),e._v(" "),n("div",{staticClass:"flex justify-end btn-group"},[n("vs-button",{attrs:{icon:"icon-edit","icon-pack":"feather",type:"relief"},on:{click:e.updateBanner}},[e._v("កែប្រែ")])],1)],1)],1)}),[],!1,null,"a8926072",null).exports,AddBanner:l},data:function(){return{selected:[],users:[{id:1,name:"Leanne Graham",username:"Bret",email:"Sincere@april.biz",website:"hildegard.org"},{id:2,name:"Ervin Howell",username:"Antonette",email:"Shanna@melissa.tv",website:"anastasia.net"}]}},computed:{all_banners:function(){return this.$store.getters.all_banner}},created:(m=f(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchBanner();case 2:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)}),methods:{fetchBanner:function(){var e=f(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchBanner");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),destroyBanner:function(){var e=this;e.$vs.loading();var t=e.selected.map(function(){var t=f(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("destroyBanner",n.id);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());Promise.all(t).then((function(){e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានកែប្រែ",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$vs.loading.close(),e.selected=[]}))},toggleBannerStatus:function(){var e=this;e.$store.dispatch("toggleBannerStatus",e.selected[0].id).then((function(t){t&&(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានកែប្រែ",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$vs.loading.close(),e.fetchBanner(),e.selected=[])}))}}},g=Object(c.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vx-card",{attrs:{"no-shadow":""}},[n("div",{staticClass:"flex btn-group"},[n("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(t){return e.$refs.addBanner.show()}}},[e._v("\n            បន្ថែម\n        ")]),e._v(" "),1===e.selected.length?n("vs-button",{attrs:{color:"warning",type:"relief","icon-pack":"feather",icon:"icon-edit"},on:{click:function(t){return e.$refs.editBanner.show(e.selected[0])}}},[e._v("កែប្រែ\n        ")]):e._e(),e._v(" "),1===e.selected.length?n("vs-button",{attrs:{color:"dark",type:"relief","icon-pack":"feather",icon:"icon-check"},on:{click:e.toggleBannerStatus}},[e._v("Active\n        ")]):e._e(),e._v(" "),e.selected.length?n("vs-button",{attrs:{color:"danger",type:"relief","icon-pack":"feather",icon:"icon-trash-2"},on:{click:e.destroyBanner}},[e._v("លុប\n        ")]):e._e()],1),e._v(" "),n("add-banner",{ref:"addBanner"}),e._v(" "),n("edit-banner",{ref:"editBanner",on:{finished:function(t){e.selected=[]}}}),e._v(" "),n("vs-table",{attrs:{multiple:"",pagination:"","max-items":"10",search:"",data:e.all_banners},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return e._l(a,(function(t,s){return n("vs-tr",{key:s,attrs:{data:t}},[n("vs-td",{attrs:{data:a[s].id}},[e._v("\n                    "+e._s(a[s].id)+"\n                ")]),e._v(" "),n("vs-td",{attrs:{data:a[s].banner}},[n("img",{attrs:{src:t.banner,alt:t.banner,height:"150"}})]),e._v(" "),n("vs-td",{attrs:{data:a[s].title}},[e._v("\n                    "+e._s(a[s].title)+"\n                ")]),e._v(" "),n("vs-td",{attrs:{data:a[s].status}},[t.status?n("vs-chip",{attrs:{color:"primary"}},[e._v("Active")]):e._e(),e._v(" "),t.status?e._e():n("vs-chip",{attrs:{color:"danger"}},[e._v("Inactive")])],1)],1)}))}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[n("template",{slot:"thead"},[n("vs-th",{attrs:{"sort-key":"id"}},[e._v("ID")]),e._v(" "),n("vs-th",{attrs:{"sort-key":"banner"}},[e._v("Banner")]),e._v(" "),n("vs-th",{attrs:{"sort-key":"title"}},[e._v("Title")]),e._v(" "),n("vs-th",{attrs:{"sort-key":"status"}},[e._v("Status")])],1)],2)],1)}),[],!1,null,"0bba80a0",null);t.default=g.exports}}]);