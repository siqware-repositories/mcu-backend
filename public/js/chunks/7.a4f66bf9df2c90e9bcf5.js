(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"0Gb6":function(t,e,n){"use strict";n.r(e);var a=n("o0o1"),o=n.n(a),s=n("hhmJ");function c(t,e,n,a,o,s,c){try{var r=t[s](c),i=r.value}catch(t){return void n(t)}r.done?e(i):Promise.resolve(i).then(a,o)}var r,i,l={name:"editAoc",components:{ImageUpload:n("xsPV").a},data:function(){return{selected_aoc:!1,is_major:!1,major:null,majors:[{name:"ឈ្មោះជំនាញ"}],aoc:{id:!1,name:"ICT",content:"អត្ថបទ",majors:[]},options:{height:300,plugins:"link image imagetools table contextmenu lists"}}},computed:{placeholder:function(){return this.$store.getters.getAppUrl+"images/placeholder/placeholder.png"},all_aocs:function(){return this.$store.getters.all_aocs},all_aoc_names:function(){return this.$store.getters.all_aoc_names},isSmallerScreen:function(){return this.$store.state.windowWidth<768}},methods:{fetchAoc:(r=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("fetchAoc");case 2:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,a){var o=r.apply(t,e);function s(t){c(o,n,a,s,i,"next",t)}function i(t){c(o,n,a,s,i,"throw",t)}s(void 0)}))},function(){return i.apply(this,arguments)}),addMajor:function(t){this.majors.push({name:t})},removeMajor:function(t){this.majors.splice(t,1)},setThumb:function(t){this.news.thumb=t},updateAoc:function(){var t=this,e=this;this.$validator.validateAll().then((function(n){n&&e.aoc.name&&e.aoc.content&&e.selected_aoc?(e.$vs.loading(),t.$store.dispatch("updateAoc",{id:e.selected_aoc,aoc:e.aoc}).then((function(t){t?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.fetchAoc()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},editAoc:function(){var t=this;t.aoc.majors=[],t.$store.dispatch("editAoc",t.selected_aoc).then((function(e){t.aoc=e}))},editAddMajorAoc:function(){var t=this;t.major?(t.$vs.loading(),t.$store.dispatch("editAddMajorAoc",{id:t.selected_aoc,major:t.major}).then((function(e){t.aoc.majors.push(e),t.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),t.$vs.loading.close(),t.major=null}))):t.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})},editUpdateMajorAoc:function(t,e,n){var a=this;t?(a.$vs.loading(),a.$store.dispatch("editUpdateMajorAoc",{id:e,content:t,key:n}).then((function(){a.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),a.$vs.loading.close()}))):a.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}}},u=n("KHd+");function d(t,e,n,a,o,s,c){try{var r=t[s](c),i=r.value}catch(t){return void n(t)}r.done?e(i):Promise.resolve(i).then(a,o)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var s=t.apply(e,n);function c(t){d(s,a,o,c,r,"next",t)}function r(t){d(s,a,o,c,r,"throw",t)}c(void 0)}))}}var v,m,h,f,_={name:"AOC",components:{EditAoc:Object(u.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vx-card",{attrs:{"no-shadow":""}},[n("div",{staticClass:"vx-row"},[n("div",{staticClass:"vx-col w-full"},[n("vs-select",{staticClass:"w-full",attrs:{autocomplete:"",label:"ជ្រើរើសបញ្ជី"},on:{input:t.editAoc},model:{value:t.selected_aoc,callback:function(e){t.selected_aoc=e},expression:"selected_aoc"}},t._l(t.all_aocs,(function(t,e){return n("vs-select-item",{key:e,attrs:{text:t.name,value:t.id}})})),1)],1)]),t._v(" "),n("vs-divider"),t._v(" "),n("div",{staticClass:"vx-row"},[n("div",{staticClass:"vx-col w-full"},[n("vs-select",{staticClass:"w-full",attrs:{autocomplete:"",label:"ឈ្មោះ",name:"name"},model:{value:t.aoc.name,callback:function(e){t.$set(t.aoc,"name",e)},expression:"aoc.name"}},t._l(t.all_aoc_names,(function(t,e){return n("vs-select-item",{key:e,attrs:{text:t.name,value:t.name}})})),1),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("name")))])],1),t._v(" "),n("div",{staticClass:"vx-col w-full my-2"},[n("tinymce",{attrs:{other_options:t.options,id:"aoc-content"},model:{value:t.aoc.content,callback:function(e){t.$set(t.aoc,"content",e)},expression:"aoc.content"}})],1),t._v(" "),t.aoc.id?n("div",{staticClass:"vx-col w-full"},[n("label",[t._v("បន្ថែមជំនាញ")]),t._v(" "),n("vx-input-group",{staticClass:"mb-2"},[n("vs-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editAddMajorAoc(e)}},model:{value:t.major,callback:function(e){t.major=e},expression:"major"}}),t._v(" "),n("template",{slot:"append"},[n("div",{staticClass:"append-text btn-addon"},[n("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-plus-square"},on:{click:t.editAddMajorAoc}})],1)])],2)],1):t._e()]),t._v(" "),t.aoc.majors.length?n("vs-tabs",t._l(t.aoc.majors,(function(e,a){return n("vs-tab",{key:a,attrs:{label:e.major}},[n("vs-tabs",{attrs:{position:t.isSmallerScreen?"top":"left"}},[n("vs-tab",{attrs:{label:"Home"}},[n("div",{staticClass:"flex btn-group my-2"},[n("vs-button",{attrs:{radius:"",icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:function(n){return t.editUpdateMajorAoc(e.content,e.id,"content")}}})],1),t._v(" "),n("tinymce",{attrs:{other_options:t.options,id:"content-"+a},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"major.content"}})],1),t._v(" "),n("vs-tab",{attrs:{label:"Curriculum"}},[n("div",{staticClass:"flex btn-group my-2"},[n("vs-button",{attrs:{radius:"",icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:function(n){return t.editUpdateMajorAoc(e.curriculum,e.id,"curriculum")}}})],1),t._v(" "),n("tinymce",{attrs:{other_options:t.options,id:"curriculum-"+a},model:{value:e.curriculum,callback:function(n){t.$set(e,"curriculum",n)},expression:"major.curriculum"}})],1),t._v(" "),n("vs-tab",{attrs:{label:"Schedule"}},[n("div",{staticClass:"flex btn-group my-2"},[n("vs-button",{attrs:{radius:"",icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:function(n){return t.editUpdateMajorAoc(e.schedule,e.id,"schedule")}}})],1),t._v(" "),n("tinymce",{attrs:{other_options:t.options,id:"schedule-"+a},model:{value:e.schedule,callback:function(n){t.$set(e,"schedule",n)},expression:"major.schedule"}})],1)],1)],1)})),1):t._e(),t._v(" "),n("vs-divider"),t._v(" "),t.selected_aoc?n("div",{staticClass:"flex justify-end btn-group"},[n("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:t.updateAoc}},[t._v("រក្សាទុក")])],1):t._e()],1)}),[],!1,null,"81d7f7d8",null).exports,AocAdd:s.a},data:function(){return{selected:[],tableList:["vs-th: Component","vs-tr: Component","vs-td: Component","thread: Slot","tbody: Slot","header: Slot"]}},computed:{isSmallerScreen:function(){return this.$store.state.windowWidth<768},all_aocs:function(){return this.$store.getters.all_aocs}},created:(f=p(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchAocName();case 2:return t.next=4,this.fetchAoc();case 4:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)}),methods:{fetchNews:(h=p(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("fetchNews");case 2:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)}),fetchAocName:(m=p(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("fetchAocName");case 2:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)}),fetchAoc:function(){var t=p(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("fetchAoc");case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),destroyAoc:(v=p(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this).$vs.loading(),n=e.selected.map(function(){var t=p(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("destroyAoc",n.id);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=5,Promise.all(n).then((function(){e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.selected=[],e.$vs.loading.close()}));case 5:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})}},x=Object(u.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vs-tabs",{key:t.isSmallerScreen},[n("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-list",label:"បញ្ជី"}},[n("vx-card",{attrs:{"no-shadow":""}},[n("div",{staticClass:"btn-group flex"},[t.selected.length?n("vs-button",{attrs:{color:"danger",icon:"icon-trash-2","icon-pack":"feather",type:"relief"},on:{click:t.destroyAoc}},[t._v("លុប")]):t._e()],1),t._v(" "),n("vs-table",{attrs:{multiple:"",pagination:"","max-items":"10",search:"",data:t.all_aocs},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,o){return n("vs-tr",{key:o,attrs:{data:e}},[n("vs-td",{attrs:{data:a[o].id}},[t._v("\n                            "+t._s(a[o].id)+"\n                        ")]),t._v(" "),n("vs-td",{attrs:{data:a[o].name}},[t._v("\n                            "+t._s(a[o].name)+"\n                        ")]),t._v(" "),n("vs-td",{attrs:{data:a[o].created_at}},[t._v("\n                            "+t._s(a[o].created_at)+"\n                        ")])],1)}))}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[n("template",{slot:"thead"},[n("vs-th",{attrs:{"sort-key":"id"}},[t._v("ល.រ")]),t._v(" "),n("vs-th",{attrs:{"sort-key":"name"}},[t._v("ឈ្មោះ")]),t._v(" "),n("vs-th",{attrs:{"sort-key":"created_at"}},[t._v("កាលបរិច្ឆេទ")])],1)],2)],1)],1),t._v(" "),n("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-plus-square",label:"បន្ថែម"}},[n("aoc-add")],1),t._v(" "),n("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-edit",label:"កែប្រែ"}},[n("edit-aoc")],1)],1)}),[],!1,null,null,null);e.default=x.exports},"8nfe":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".placeholder[data-v-5e227453]{\n  width: 130px;\n  height: 130px;\n  display: -webkit-box;\n  display: flex;\n  -webkit-box-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  justify-content: center;\n  color: rgba(0,0,0,.15);\n}[dir] .placeholder[data-v-5e227453]{\n  background: transparent;\n  border-radius: 10px;\n  border: 1px dashed #dcdcdc;\n  cursor: pointer;\n}\n",""])},AyAP:function(t,e,n){var a=n("8nfe");"string"==typeof a&&(a=[[t.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,o);a.locals&&(t.exports=a.locals)},hhmJ:function(t,e,n){"use strict";var a={name:"AocAdd",components:{ImageUpload:n("xsPV").a},data:function(){return{is_major:!1,majors:[{name:"ឈ្មោះជំនាញ"}],aoc:{name:"ICT",content:"អត្ថបទ"},options:{height:300,plugins:"link image imagetools table contextmenu lists"}}},computed:{placeholder:function(){return this.$store.getters.getAppUrl+"images/placeholder/placeholder.png"},all_aoc_names:function(){return this.$store.getters.all_aoc_names}},methods:{addMajor:function(t){this.majors.push({name:t})},removeMajor:function(t){this.majors.splice(t,1)},setThumb:function(t){this.news.thumb=t},storeAoc:function(){var t=this,e=this;this.$validator.validateAll().then((function(n){n&&e.aoc.name&&e.aoc.content?(e.$vs.loading(),t.$store.dispatch("storeAoc",{is_major:e.is_major,aoc:e.aoc,majors:e.majors}).then((function(t){t?e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))}}},o=n("KHd+"),s=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vx-card",{attrs:{"no-shadow":""}},[n("div",{staticClass:"vx-row"},[n("div",{staticClass:"vx-col w-full"},[n("vs-select",{staticClass:"w-full",attrs:{autocomplete:"",label:"ឈ្មោះ",name:"name"},model:{value:t.aoc.name,callback:function(e){t.$set(t.aoc,"name",e)},expression:"aoc.name"}},t._l(t.all_aoc_names,(function(t,e){return n("vs-select-item",{key:e,attrs:{text:t.name,value:t.name}})})),1),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("name")))])],1),t._v(" "),n("div",{staticClass:"vx-col w-full my-2"},[n("tinymce",{attrs:{other_options:t.options,id:"news-content"},model:{value:t.aoc.content,callback:function(e){t.$set(t.aoc,"content",e)},expression:"aoc.content"}})],1)]),t._v(" "),n("div",{staticClass:"vx-row"},[n("div",{staticClass:"vx-col w-full my-4"},[n("vs-checkbox",{model:{value:t.is_major,callback:function(e){t.is_major=e},expression:"is_major"}},[t._v("តើមានជំនាញដែរឬទេ?")])],1),t._v(" "),n("div",{staticClass:"vx-col w-full"},t._l(t.majors,(function(e,a){return t.is_major?n("div",{key:a},[n("vx-input-group",{staticClass:"mb-2"},[n("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"+a},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"major.name"}}),t._v(" "),n("template",{slot:"append"},[n("div",{staticClass:"append-text btn-addon"},[t.majors.length>1?n("vs-button",{attrs:{radius:"",color:"warning",type:"border","icon-pack":"feather",icon:"icon-minus"},on:{click:function(e){return t.removeMajor(a)}}}):t._e(),t._v(" "),a===t.majors.length-1?n("vs-button",{attrs:{radius:"",type:"border","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(e){return t.addMajor(a)}}}):t._e()],1)])],2),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"+a),expression:"errors.has('name'+index)"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("name"+a)))])],1):t._e()})),0)]),t._v(" "),n("vs-divider"),t._v(" "),n("div",{staticClass:"flex justify-end btn-group"},[n("vs-button",{attrs:{icon:"icon-save","icon-pack":"feather",type:"relief"},on:{click:t.storeAoc}},[t._v("រក្សាទុក")])],1)],1)}),[],!1,null,"cc980214",null);e.a=s.exports},sFpq:function(t,e,n){"use strict";var a=n("AyAP");n.n(a).a},xsPV:function(t,e,n){"use strict";var a=n("o0o1"),o=n.n(a),s=n("vDqi"),c=n.n(s);function r(t,e,n,a,o,s,c){try{var r=t[s](c),i=r.value}catch(t){return void n(t)}r.done?e(i):Promise.resolve(i).then(a,o)}var i,l,u={props:["imageSrc","uploadUrl"],name:"ImageUpload",computed:{placeholder:function(){return this.$store.getters.getAppUrl+"images/placeholder/placeholder.png"}},methods:{onFileChange:(i=o.a.mark((function t(e){var n,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new FormData,a=e.target.files[0],n.append("file",a),t.next=5,c.a.post(route(this.uploadUrl),n);case 5:s=t.sent,this.$emit("get-image-path",s.data);case 7:case"end":return t.stop()}}),t,this)})),l=function(){var t=this,e=arguments;return new Promise((function(n,a){var o=i.apply(t,e);function s(t){r(o,n,a,s,c,"next",t)}function c(t){r(o,n,a,s,c,"throw",t)}s(void 0)}))},function(t){return l.apply(this,arguments)})}},d=(n("sFpq"),n("KHd+")),p=Object(d.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("label",{attrs:{for:"image-upload"}},[e("span",{staticClass:"placeholder"},[this.imageSrc?e("img",{staticClass:"responsive",attrs:{src:this.imageSrc,alt:this.imageSrc}}):this._e()])]),this._v(" "),e("div",{staticClass:"vs-con-input"},[e("input",{staticClass:"hidden",attrs:{type:"file",id:"image-upload",name:"file"},on:{change:this.onFileChange}})])])}),[],!1,null,"5e227453",null);e.a=p.exports}}]);